<!--
=========================================================
* Corporate UI - Reportes
=========================================================
-->
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <title>Reportes</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Noto+Sans:300,400,500,600,700,800|PT+Mono:300,400,500,600,700" rel="stylesheet" />
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/349ee9c857.js" crossorigin="anonymous"></script>
  <link id="pagestyle" href="../assets/css/corporate-ui-dashboard.css?v=1.0.0" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <style>
    .filter-card { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin-bottom: 20px; }
    .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; padding: 20px; margin-bottom: 15px; }
    .stat-card.warning { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .stat-card.success { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
    .stat-card h6 { font-size: 0.85rem; opacity: 0.9; }
    .stat-card .stat-value { font-size: 1.8rem; font-weight: bold; }
    .chart-container { position: relative; height: 300px; margin-bottom: 30px; }
    @media (min-width:1200px){
      aside.sidenav{ width:260px; }
      main.main-content{ transition: margin-left .25s ease; margin-left:260px; }
      body.my-sidenav-collapsed main.main-content{ margin-left:0 !important; }
    }
    #sidenav-backdrop{ display:none; position:fixed; inset:0; background:rgba(0,0,0,0.45); z-index:1040; }
    body.my-sidenav-open #sidenav-backdrop{ display:block; }
    @media (min-width:1200px){ #sidenav-backdrop{ display:none !important; } }
  </style>
</head>

<body class="g-sidenav-show bg-gray-100">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 bg-slate-900 fixed-start" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand d-flex align-items-center m-0" href="dashboard.html">
        <span class="font-weight-bold text-lg">D'Cesar</span>
      </a>
    </div>
    <div class="collapse navbar-collapse px-4 w-auto" id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" href="dashboard.html"><div class="icon icon-shape icon-sm px-0 text-center d-flex align-items-center justify-content-center"><svg width="30px" height="30px" viewBox="0 0 48 48" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="dashboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="template" transform="translate(12.000000, 12.000000)" fill="#FFFFFF" fill-rule="nonzero"><path class="color-foreground" d="M0,1.71428571 C0,0.76752 0.76752,0 1.71428571,0 L22.2857143,0 C23.2325143,0 24,0.76752 24,1.71428571 L24,5.14285714 C24,6.08962286 23.2325143,6.85714286 22.2857143,6.85714286 L1.71428571,6.85714286 C0.76752,6.85714286 0,6.08962286 0,5.14285714 L0,1.71428571 Z" id="Path"></path><path class="color-background" d="M0,12 C0,11.0532171 0.76752,10.2857143 1.71428571,10.2857143 L12,10.2857143 C12.9468,10.2857143 13.7142857,11.0532171 13.7142857,12 L13.7142857,22.2857143 C13.7142857,23.2325143 12.9468,24 12,24 L1.71428571,24 C0.76752,24 0,23.2325143 0,22.2857143 L0,12 Z" id="Path"></path><path class="color-background" d="M18.8571429,10.2857143 C17.9103429,10.2857143 17.1428571,11.0532171 17.1428571,12 L17.1428571,22.2857143 C17.1428571,23.2325143 17.9103429,24 18.8571429,24 L22.2857143,24 C23.2325143,24 24,23.2325143 24,22.2857143 L24,12 C24,11.0532171 23.2325143,10.2857143 22.2857143,10.2857143 L18.8571429,10.2857143 Z" id="Path"></path></g></g></svg></div><span class="nav-link-text ms-1">Dashboard</span></a></li>
        <li class="nav-item"><a class="nav-link" href="users-list.html"><div class="icon icon-shape icon-sm px-0 text-center d-flex align-items-center justify-content-center"><svg width="30px" height="30px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M24 24a6 6 0 110-12 6 6 0 010 12z" fill="#FFFFFF"/><path d="M8 32c0-3.3 2-6 6-8h20c4 2 6 4.7 6 8v8H8v-8z" fill="#FFFFFF" opacity="0.7"/></svg></div><span class="nav-link-text ms-1">Usuarios</span></a></li>
        <li class="nav-item"><a class="nav-link" href="productos.html"><div class="icon icon-shape icon-sm px-0 text-center d-flex align-items-center justify-content-center"><svg width="30px" height="30px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M6 12h36v24H6z" fill="#FFFFFF" opacity="0.7"/><path d="M12 6h24v6H12z" fill="#FFFFFF"/></svg></div><span class="nav-link-text ms-1">Productos</span></a></li>
        <li class="nav-item"><a class="nav-link active" href="reportes.html"><div class="icon icon-shape icon-sm px-0 text-center d-flex align-items-center justify-content-center"><svg width="30px" height="30px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M8 8h32v28H8z" fill="#FFFFFF" opacity="0.7"/><path d="M12 16h4v8h-4z" fill="#FFFFFF"/><path d="M22 12h4v12h-4z" fill="#FFFFFF"/><path d="M32 14h4v10h-4z" fill="#FFFFFF"/></svg></div><span class="nav-link-text ms-1">Reportes</span></a></li>
      </ul>
    </div>
  </aside>

  <div id="sidenav-backdrop"></div>

  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg">
    <nav class="navbar navbar-main navbar-expand-lg mx-5 px-0 shadow-none rounded" id="navbarBlur" navbar-scroll="true">
      <div class="container-fluid py-1 px-2">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-1 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="dashboard.html">Dashboard</a></li>
            <li class="breadcrumb-item text-sm text-dark active" aria-current="page">Reportes</li>
          </ol>
          <h6 class="font-weight-bold mb-0">Reportes y Análisis</h6>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center gap-2">
            <button class="btn btn-sm btn-white" onclick="exportToCSV()"><i class="fa fa-download me-2"></i>CSV</button>
            <button class="btn btn-sm btn-primary" onclick="printReport()"><i class="fa fa-print me-2"></i>Imprimir</button>
          </div>
        </div>
      </div>
    </nav>

    <div class="container-fluid py-4 px-5">
      <div class="row mb-4">
        <div class="col-md-12">
          <h3 class="font-weight-bold">Generador de Reportes</h3>
        </div>
      </div>

      <!-- ESTADISTICAS -->
      <div class="row mb-4">
        <div class="col-lg-3 col-md-6">
          <div class="stat-card">
            <h6>Ventas Totales</h6>
            <div class="stat-value">S/ 12,450.00</div>
            <small>Este período</small>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="stat-card success">
            <h6>Transacciones</h6>
            <div class="stat-value">156</div>
            <small>Operaciones realizadas</small>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="stat-card warning">
            <h6>Ticket Promedio</h6>
            <div class="stat-value">S/ 79.81</div>
            <small>Por transacción</small>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="stat-card">
            <h6>Ganancia Neta</h6>
            <div class="stat-value">S/ 3,980</div>
            <small>Utilidad total</small>
          </div>
        </div>
      </div>

      <!-- FILTROS -->
      <div class="filter-card">
        <div class="row g-2 align-items-end">
          <div class="col-md-2">
            <label class="form-label text-xs font-weight-bold">Desde</label>
            <input type="date" class="form-control form-control-sm" id="filter-date-from">
          </div>
          <div class="col-md-2">
            <label class="form-label text-xs font-weight-bold">Hasta</label>
            <input type="date" class="form-control form-control-sm" id="filter-date-to">
          </div>
          <div class="col-md-2">
            <label class="form-label text-xs font-weight-bold">Tipo Reporte</label>
            <select class="form-control form-control-sm" id="filter-type" onchange="updateCharts()">
              <option value="sales">Ventas Diarias</option>
              <option value="products">Productos Más Vendidos</option>
              <option value="categories">Por Categoría</option>
              <option value="clients">Por Cliente</option>
            </select>
          </div>
          <div class="col-md-2">
            <label class="form-label text-xs font-weight-bold">Categoría</label>
            <select class="form-control form-control-sm" id="filter-category">
              <option value="">Todas</option>
              <option value="focos">Focos</option>
              <option value="alternadores">Alternadores</option>
            </select>
          </div>
          <div class="col-md-2">
            <label class="form-label text-xs font-weight-bold">&nbsp;</label>
            <button class="btn btn-sm btn-dark w-100" onclick="generateReport()"><i class="fa fa-refresh me-1"></i>Generar</button>
          </div>
          <div class="col-md-2">
            <label class="form-label text-xs font-weight-bold">&nbsp;</label>
            <button class="btn btn-sm btn-white w-100" onclick="clearFilters()"><i class="fa fa-redo me-1"></i>Limpiar</button>
          </div>
        </div>
      </div>

      <!-- GRAFICOS -->
      <div class="row mb-4">
        <div class="col-lg-6">
          <div class="card shadow-xs border">
            <div class="card-header border-bottom pb-3">
              <h6 class="font-weight-semibold mb-0">Ventas por Día</h6>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="sales-chart"></canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="card shadow-xs border">
            <div class="card-header border-bottom pb-3">
              <h6 class="font-weight-semibold mb-0">Ventas por Categoría</h6>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="category-chart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- TABLA DE DETALLES -->
      <div class="row">
        <div class="col-lg-12">
          <div class="card shadow-xs border">
            <div class="card-header border-bottom pb-3">
              <h6 class="font-weight-semibold mb-0">Detalles de Ventas</h6>
            </div>
            <div class="card-body px-0 py-0">
              <div class="table-responsive p-3">
                <table class="table table-hover align-items-center mb-0">
                  <thead class="bg-light">
                    <tr>
                      <th>Fecha</th>
                      <th>Producto</th>
                      <th>Categoría</th>
                      <th>Cantidad</th>
                      <th>Precio Unit.</th>
                      <th>Total</th>
                      <th>Ganancia</th>
                    </tr>
                  </thead>
                  <tbody id="report-tbody">
                    <tr>
                      <td>2024-11-25</td>
                      <td>Foco LED H7</td>
                      <td>Focos</td>
                      <td>5</td>
                      <td>S/ 45.90</td>
                      <td>S/ 229.50</td>
                      <td>S/ 103.50</td>
                    </tr>
                    <tr>
                      <td>2024-11-25</td>
                      <td>Alternador Denso</td>
                      <td>Alternadores</td>
                      <td>2</td>
                      <td>S/ 380.50</td>
                      <td>S/ 761.00</td>
                      <td>S/ 321.00</td>
                    </tr>
                    <tr>
                      <td>2024-11-24</td>
                      <td>Regulador Alternador</td>
                      <td>Piezas</td>
                      <td>8</td>
                      <td>S/ 65.00</td>
                      <td>S/ 520.00</td>
                      <td>S/ 240.00</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer pt-3">
      <div class="container-fluid">
        <div class="row align-items-center justify-content-lg-between">
          <div class="col-lg-6 mb-lg-0 mb-4">
            <div class="copyright text-center text-xs text-muted text-lg-start">
              Copyright © <script>document.write(new Date().getFullYear())</script> D'Cesar
            </div>
          </div>
        </div>
      </div>
    </footer>
  </main>

  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script src="../assets/js/corporate-ui-dashboard.min.js?v=1.0.0"></script>

  <script>
    let salesChart, categoryChart;

    document.addEventListener('DOMContentLoaded', function() {
      setupSidebar();
      initializeCharts();
    });

    function setupSidebar() {
      const icon = document.getElementById('iconSidenav');
      const backdrop = document.getElementById('sidenav-backdrop');
      if(icon) icon.addEventListener('click', () => document.body.classList.toggle('my-sidenav-open'));
      if(backdrop) backdrop.addEventListener('click', () => document.body.classList.remove('my-sidenav-open'));
    }

    function initializeCharts() {
      const ctx1 = document.getElementById('sales-chart').getContext('2d');
      salesChart = new Chart(ctx1, {
        type: 'line',
        data: {
          labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sab', 'Dom'],
          datasets: [{
            label: 'Ventas (S/)',
            data: [1200, 1900, 1600, 2100, 1800, 2200, 1900],
            borderColor: '#667eea',
            backgroundColor: 'rgba(102, 126, 234, 0.1)',
            tension: 0.4,
            fill: true
          }]
        },
        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
      });

      const ctx2 = document.getElementById('category-chart').getContext('2d');
      categoryChart = new Chart(ctx2, {
        type: 'doughnut',
        data: {
          labels: ['Focos', 'Alternadores', 'Piezas', 'Aceites'],
          datasets: [{
            data: [2500, 4200, 1800, 950],
            backgroundColor: ['#667eea', '#764ba2', '#f093fb', '#43e97b']
          }]
        },
        options: { responsive: true, maintainAspectRatio: false }
      });
    }

    function updateCharts() {
      generateReport();
    }

    function generateReport() {
      alert('✓ Reporte generado correctamente');
    }

    function clearFilters() {
      document.getElementById('filter-date-from').value = '';
      document.getElementById('filter-date-to').value = '';
      document.getElementById('filter-type').value = 'sales';
      document.getElementById('filter-category').value = '';
    }

    function exportToCSV() {
      const csv = 'Fecha,Producto,Categoría,Cantidad,Precio,Total,Ganancia\n2024-11-25,Foco LED H7,Focos,5,45.90,229.50,103.50';
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'reporte_' + new Date().toISOString().split('T')[0] + '.csv';
      a.click();
    }

    function printReport() {
      window.print();
    }
  </script>

</body>

</html>
